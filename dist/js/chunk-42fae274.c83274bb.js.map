{"version":3,"sources":["webpack:///./src/lib-components/kalendar-cell.vue?b3d4","webpack:///src/lib-components/kalendar-cell.vue","webpack:///./src/lib-components/kalendar-cell.vue?1152","webpack:///./src/lib-components/kalendar-cell.vue","webpack:///./src/lib-components/kalendar-cell.vue?ccb1"],"names":["render","_vm","this","_h","$createElement","_c","_self","cellData","ref","activity","activity_id","staticClass","class","selected","index","cell_events","length","being_created","hasPopups","style","kalendar_options","on","$event","target","currentTarget","mouseMove","mouseDown","mouseUp","_l","event","eventIndex","key","attrs","overlapValue","_e","staticRenderFns","component"],"mappings":"iJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAIM,SAAgB,QAAEF,EAAG,KAAK,CAACG,IAAIP,EAAIQ,SAASC,YAAYC,YAAY,gBAAgBC,MAAM,CACvLC,SAAUZ,EAAIY,SACd,cAAeZ,EAAIa,MAAQ,GAAK,IAAc,EAC9C,aAAcb,EAAIc,aAAed,EAAIc,YAAYC,OAAS,EAC1D,kBAAmBf,EAAIgB,eAAiBhB,EAAIiB,WAC9CC,MAAQ,eAAkBlB,EAAImB,iBAA4B,YAAI,QAAUC,GAAG,CAAC,UAAY,SAASC,GAAQ,OAAGA,EAAOC,SAAWD,EAAOE,cAAuB,KAAcvB,EAAIwB,aAAa,UAAY,SAASH,GAAQ,OAAGA,EAAOC,SAAWD,EAAOE,cAAuB,KAAcvB,EAAIyB,aAAa,QAAU,SAASJ,GAAQ,OAAOrB,EAAI0B,aAAa1B,EAAI2B,GAAI3B,EAAe,aAAE,SAAS4B,EAAMC,GAAY,OAAQ7B,EAAIc,aAAed,EAAIc,YAAYC,OAAQX,EAAG,gBAAgB,CAAC0B,IAAID,EAAa7B,EAAIQ,SAASC,YAAYS,MAAM,cAAgBa,MAAM,CAAC,MAAQH,EAAM,MAAQ5B,EAAIc,YAAYC,OAAO,MAAQc,EAAW,SAAW7B,EAAIgC,gBAAgBhC,EAAIiC,QAAO,GAAGjC,EAAIiC,MAClpBC,EAAkB,G,msBC8BtB,OACE,MAAF,CACA,UACA,QACA,WACA,oBACA,iBACA,WACA,MACA,WACA,wBAEE,OAAF,qBACE,WAAF,CACI,cAAJ,WAAM,OAAN,kDAEE,QAhBF,WAiBA,qCACA,WACA,iDAFI,IADJ,mBAAI,IAIE,IAAN,kFAAQ,IAAR,UACA,uDACA,yDANA,oFAaE,SAAF,CACI,YADJ,WAGM,IAAN,KAOM,OANN,wBACQ,EAAR,iCAEA,qBACQ,EAAR,8BAEA,GAEI,iBAZJ,WAaM,OACN,wBACA,4DACA,6CAGI,cAnBJ,WAoBM,OACN,qBACA,uDACA,qBAGI,kBA1BJ,WA0BM,IAAN,OACM,OAAN,kDACA,GACA,sCACA,OACA,oBACQ,IAAR,6BACA,0BACA,wBACQ,OAAR,aAGI,aAtCJ,WAuCM,IAAN,gCACM,OAAN,SAEI,SA1CJ,WA2CM,OAAN,6CAEI,UA7CJ,WA8CM,OACN,iBACA,mCAAQ,MAAR,kCAIE,QAAF,CAEI,UAFJ,WAKM,GAAN,sBACQ,KAAR,cADM,CAIA,IAAN,EAIA,sBAHA,EADA,EACA,UACA,EAFA,EAEA,QACA,EAHA,EAGA,oBAEM,IAAN,EAAM,CAGA,IAAN,OACQ,IAAR,2BACQ,GAAR,0CAEU,YADA,KAAV,UAQM,GAAN,gCAAM,CAIA,KAAN,wBAEM,KAAN,uCAOM,IAAN,GACQ,UAAR,EACQ,uBAAR,8BACQ,cAAR,8BACQ,aAAR,8BACQ,YAAR,+BAEM,KAAN,sBAEI,UAlDJ,WAoDM,IAAN,wBAAU,EAAV,sBACM,IAAN,KACA,qCAAM,CACA,IAAN,EAIA,aAHA,EADA,EACA,cACA,EAFA,EAEA,uBACA,EAHA,EAGA,SAIA,EACA,8BACA,kBAEM,GAAN,GACQ,IAAR,SACA,cADA,IAEU,aAAV,cACU,YAAV,cACU,UAAV,uBAEQ,KAAR,qBAGI,QA5EJ,WA6EA,iCACA,uBACQ,KAAR,wBAGI,aAlFJ,WAmFM,KAAN,kBCxMuV,I,wBCQnVC,EAAY,eACd,EACApC,EACAmC,GACA,EACA,KACA,KACA,MAIa,aAAAC,E,2CCnBf,0BAAkhB,EAAG","file":"js/chunk-42fae274.c83274bb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.cellData.visible)?_c('li',{ref:_vm.activity.activity_id,staticClass:\"kalendar-cell\",class:{\n        selected: _vm.selected,\n        'is-an-hour': (_vm.index + 1) % (60 / 10) === 0,\n        'has-events': _vm.cell_events && _vm.cell_events.length > 0,\n        'being-created': !!_vm.being_created || _vm.hasPopups,\n    },style:((\"\\n  height: \" + (_vm.kalendar_options.cell_height) + \"px;\\n\")),on:{\"mouseover\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.mouseMove()},\"mousedown\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.mouseDown()},\"mouseup\":function($event){return _vm.mouseUp()}}},_vm._l((_vm.cell_events),function(event,eventIndex){return (_vm.cell_events && _vm.cell_events.length)?_c('KalendarEvent',{key:eventIndex + _vm.activity.activity_id,style:(\"z-index: 10\"),attrs:{\"event\":event,\"total\":_vm.cell_events.length,\"index\":eventIndex,\"overlaps\":_vm.overlapValue}}):_vm._e()}),1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <li\r\n        v-if=\"cellData.visible\"\r\n        @mouseover.self=\"mouseMove()\"\r\n        @mousedown.self=\"mouseDown()\"\r\n        @mouseup=\"mouseUp()\"\r\n        class=\"kalendar-cell\" \r\n    \r\n        v-bind:ref=\"activity.activity_id\"\r\n        :class=\"{\r\n            selected: selected,\r\n            'is-an-hour': (index + 1) % (60 / 10) === 0,\r\n            'has-events': cell_events && cell_events.length > 0,\r\n            'being-created': !!being_created || hasPopups,\r\n        }\"\r\n        :style=\"\r\n            `\r\n      height: ${kalendar_options.cell_height}px;\r\n    `\r\n        \"\r\n    >\r\n        <KalendarEvent\r\n            :style=\"`z-index: 10`\"\r\n            v-if=\"cell_events && cell_events.length\"\r\n            v-for=\"(event, eventIndex) in cell_events\"\r\n            :event=\"event\"\r\n            :key=\"eventIndex + activity.activity_id\"\r\n            :total=\"cell_events.length\"\r\n            :index=\"eventIndex\"\r\n            :overlaps=\"overlapValue\"\r\n        />\r\n    </li>\r\n</template>\r\n<script>\r\nimport { cloneObject, getLocaleTime } from './utils.js';\r\n\r\nexport default {\r\n    props: [\r\n        'creator',\r\n        'index',\r\n        'cellData',\r\n        'constructedEvents',\r\n        'temporaryEvent',\r\n        'activity',\r\n        \"day\",\r\n        'position',\r\n        \"available_activities\"\r\n    ],\r\n    inject: ['kalendar_options'],\r\n    components: {\r\n        KalendarEvent: () => import('./kalendar-event.vue'),\r\n    },\r\n    mounted(){\r\n        const activityIdOfCell = parseInt(Object.keys(this.$refs)[0])\r\n        const currenCell = this.$refs\r\n        const bookedActivityTime = new Date(Object.keys(this.constructedEvents)[0])\r\n        for(let ac of this.available_activities){\r\n            if(ac.start_time.slice(0,10)===this.day.value.slice(0,10)){    \r\n                 if(ac.activity_id == this.activity.activity_id && ac.activity_id==activityIdOfCell)\r\n                        {\r\n                            \r\n                        }\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        cell_events() {\r\n\r\n            let all_events = [];\r\n            if (this.completed_events) {\r\n                all_events = all_events.concat(this.completed_events);\r\n            }\r\n            if (this.being_created) {\r\n                all_events = all_events.concat(this.being_created);\r\n            }\r\n            return all_events;\r\n        },\r\n        completed_events() {\r\n            return (\r\n                this.constructedEvents &&\r\n                this.constructedEvents.hasOwnProperty(this.cellData.value) &&\r\n                this.constructedEvents[this.cellData.value]\r\n            );\r\n        },\r\n        being_created() {\r\n            return (\r\n                this.temporaryEvent &&\r\n                this.temporaryEvent.start.value === this.cellData.value &&\r\n                this.temporaryEvent\r\n            );\r\n        },\r\n        overlappingEvents() {\r\n            if (!this.constructedEvents || this.cell_events.length < 1)\r\n                return [];\r\n            return Object.values(this.constructedEvents)\r\n                .flat()\r\n                .filter(event => {\r\n                    let cellDate = new Date(this.cellData.value);\r\n                    let eventStarts = new Date(event.start.value);\r\n                    let eventEnds = new Date(event.end.value);\r\n                    return eventStarts < cellDate && eventEnds > cellDate;\r\n                });\r\n        },\r\n        overlapValue() {\r\n            let length = this.overlappingEvents.length;\r\n            return length > 2 ? 2 : length;\r\n        },\r\n        selected() {\r\n            return this.cell_events && this.cell_events.length > 0;\r\n        },\r\n        hasPopups() {\r\n            return (\r\n                this.selected &&\r\n                !!this.cell_events.find(ev => ev.status === 'popup-initiated')\r\n            );\r\n        },\r\n    },\r\n    methods: {\r\n         \r\n        mouseDown() {\r\n            // user mouse got depressed while outside kalendar-cells\r\n            // came back in and clicked while the creator was on\r\n            if (!!this.creator.creating) {\r\n                this.mouseUp();\r\n                return;\r\n            }\r\n            let {\r\n                read_only,\r\n                overlap,\r\n                past_event_creation,\r\n            } = this.kalendar_options;\r\n            if (read_only) return;\r\n            // if past_event_creation is set to false, check if cell value is\r\n            // before current time\r\n            if (past_event_creation === false) {\r\n                let now = getLocaleTime(new Date());\r\n                if (new Date(now) > new Date(this.cellData.value)) {\r\n                    this.mouseUp();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // if overlap is set to false, prevent selection on top of\r\n            // other events\r\n           \r\n            if (!overlap && this.cell_events.length > 0) return;\r\n\r\n            // close any open popups in the whole kalendar instance\r\n            // before starting a new one\r\n            this.$kalendar.closePopups();\r\n            \r\n             this.$kalendar.updatePayload(this.position)\r\n           \r\n            // create a payload consisting of\r\n            // starting, current, ending and originalStarting cell\r\n            // starting, current and ending are self explanatory\r\n            // but originalStarting cell is required\r\n            // to determine the direction of the scroll/drag\r\n            let payload = {\r\n                creating: true,\r\n                original_starting_cell: cloneObject(this.cellData),\r\n                starting_cell: cloneObject(this.cellData),\r\n                current_cell: cloneObject(this.cellData),\r\n                ending_cell: cloneObject(this.cellData),\r\n            };\r\n            this.$emit('select', payload);\r\n        },\r\n        mouseMove() {\r\n            // same guards like in the mouseDown function\r\n            let { read_only, overlap } = this.kalendar_options;\r\n            if (read_only) return;\r\n            if (this.creator && !this.creator.creating) return;\r\n            let {\r\n                starting_cell,\r\n                original_starting_cell,\r\n                creating,\r\n            } = this.creator;\r\n\r\n            // direction of scroll\r\n            let going_down =\r\n                this.cellData.index >= starting_cell.index &&\r\n                starting_cell.index === original_starting_cell.index;\r\n\r\n            if (creating) {\r\n                let payload = {\r\n                    ...this.creator,\r\n                    current_cell: this.cellData,\r\n                    ending_cell: this.cellData,\r\n                    direction: going_down ? 'normal' : 'reverse',\r\n                };\r\n                this.$emit('select', payload);\r\n            }\r\n        },\r\n        mouseUp() {\r\n            if (this.kalendar_options.read_only) return;\r\n            if (this.creator.creating) {\r\n                this.$emit('initiatePopup');\r\n            }\r\n        },\r\n        resetCreator() {\r\n            this.$emit('reset');\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n$creator-bg: #34aadc;\r\n$creator-content: white;\r\n\r\nli {\r\n    font-size: 13px;\r\n    position: relative;\r\n}\r\n\r\n.created-events {\r\n    //width: 100%;\r\n    height: 100%;\r\n}\r\n\r\nul.building-blocks {\r\n    li {\r\n        z-index: 0;\r\n        border-bottom: dotted 1px var(--odd-cell-border-color);\r\n\r\n        &.first_of_appointment {\r\n            z-index: 1;\r\n            opacity: 1; //z-index:0;\r\n        }\r\n\r\n        &.is-an-hour {\r\n            border-bottom: solid 1px var(--table-cell-border-color);\r\n        }\r\n\r\n        &.has-events {\r\n            z-index: unset;\r\n        }\r\n\r\n        &.being-created {\r\n            z-index: 11;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-cell.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-cell.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./kalendar-cell.vue?vue&type=template&id=88c764f0&\"\nimport script from \"./kalendar-cell.vue?vue&type=script&lang=js&\"\nexport * from \"./kalendar-cell.vue?vue&type=script&lang=js&\"\nimport style0 from \"./kalendar-cell.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-cell.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kalendar-cell.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}