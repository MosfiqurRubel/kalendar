{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib-components/workers/registerPromiseWorker.js","webpack:///./src/lib-components/utils.js","webpack:///./src/lib-components/hours.js","webpack:///./src/lib-components/workers/operations.worker.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isPromise","obj","then","callback","postOutgoingMessage","e","messageId","error","result","postMessage","msg","self","ports","console","message","tryCatchFunc","res","err","handleIncomingMessage","finalResult","finalError","onIncomingMessage","payload","data","Array","isArray","length","Error","addEventListener","creators_offset","Date","getTimezoneOffset","padStart","getHourlessDate","date_string","today","year","getFullYear","month","getMonth","day","getDate","getYearMonthDay","slice","addDays","date","days","dateObj","setUTCHours","setDate","generateUUID","replace","crypto","getRandomValues","Uint8Array","toString","getAllHours","getFullHours","getDays","dayString","hide_dates","hide_days","view_type","day_of_week","getUTCDay","toISOString","index","idx","push","filter","indexOf","getHours","hour_options","iso_date","day_hours","hourUtils","start_hour","end_hour","hours","visible","registerPromiseWorker","type","options","hourOptions","getDayCells","constructDayEvents","events","constructNewEvent","event","day_options","cells","date_part","all_hours","start_index","end_index","hourIdx","hour","existing_events","events_for_this_day","map","from","to","filtered_events","forEach","constructedEvent","setUTCSeconds","from_value","masked_from","getTime","masked_to","fromData","masked_value","rounded","round_offset","to_value","toData","multipleOf10","dateStr","getMinutes","minutes","maskedMinutes","Math","floor","setMinutes","eventKey","diffInMs","diffInHrs","diffMins","round","start","end","id","distance","status"],"mappings":"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","file":"13a62894b123ef52636d.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"fa12\");\n","//todo: remove this and fork promise-worker to provide ESM\r\n\r\n\"use strict\";\r\n\r\nfunction isPromise(obj) {\r\n\t// via https://unpkg.com/is-promise@2.1.0/index.js\r\n\treturn (\r\n\t\t!!obj &&\r\n\t\t(typeof obj === \"object\" || typeof obj === \"function\") &&\r\n\t\ttypeof obj.then === \"function\"\r\n\t);\r\n}\r\n\r\nexport default function(callback) {\r\n\tfunction postOutgoingMessage(e, messageId, error, result) {\r\n\t\tfunction postMessage(msg) {\r\n\t\t\t/* istanbul ignore if */\r\n\t\t\tif (typeof self.postMessage !== \"function\") {\r\n\t\t\t\t// service worker\r\n\t\t\t\te.ports[0].postMessage(msg);\r\n\t\t\t} else {\r\n\t\t\t\t// web worker\r\n\t\t\t\tself.postMessage(msg);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (error) {\r\n\t\t\t/* istanbul ignore else */\r\n\t\t\tif (typeof console !== \"undefined\" && \"error\" in console) {\r\n\t\t\t\t// This is to make errors easier to debug. I think it's important\r\n\t\t\t\t// enough to just leave here without giving the user an option\r\n\t\t\t\t// to silence it.\r\n\t\t\t\tconsole.error(\"Worker caught an error:\", error);\r\n\t\t\t}\r\n\t\t\tpostMessage([\r\n\t\t\t\tmessageId,\r\n\t\t\t\t{\r\n\t\t\t\t\tmessage: error.message\r\n\t\t\t\t}\r\n\t\t\t]);\r\n\t\t} else {\r\n\t\t\tpostMessage([messageId, null, result]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tryCatchFunc(callback, message) {\r\n\t\ttry {\r\n\t\t\treturn { res: callback(message) };\r\n\t\t} catch (e) {\r\n\t\t\treturn { err: e };\r\n\t\t}\r\n\t}\r\n\r\n\tfunction handleIncomingMessage(e, callback, messageId, message) {\r\n\t\tvar result = tryCatchFunc(callback, message);\r\n\r\n\t\tif (result.err) {\r\n\t\t\tpostOutgoingMessage(e, messageId, result.err);\r\n\t\t} else if (!isPromise(result.res)) {\r\n\t\t\tpostOutgoingMessage(e, messageId, null, result.res);\r\n\t\t} else {\r\n\t\t\tresult.res.then(\r\n\t\t\t\tfunction(finalResult) {\r\n\t\t\t\t\tpostOutgoingMessage(e, messageId, null, finalResult);\r\n\t\t\t\t},\r\n\t\t\t\tfunction(finalError) {\r\n\t\t\t\t\tpostOutgoingMessage(e, messageId, finalError);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onIncomingMessage(e) {\r\n\t\tvar payload = e.data;\r\n\t\tif (!Array.isArray(payload) || payload.length !== 2) {\r\n\t\t\t// message doens't match communication format; ignore\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar messageId = payload[0];\r\n\t\tvar message = payload[1];\r\n\r\n\t\tif (typeof callback !== \"function\") {\r\n\t\t\tpostOutgoingMessage(\r\n\t\t\t\te,\r\n\t\t\t\tmessageId,\r\n\t\t\t\tnew Error(\"Please pass a function into register().\")\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\thandleIncomingMessage(e, callback, messageId, message);\r\n\t\t}\r\n\t}\r\n\r\n\tself.addEventListener(\"message\", onIncomingMessage);\r\n}\r\n","let creators_offset = new Date().getTimezoneOffset() / 60;\r\nif (creators_offset * -1 >= 0) {\r\n  creators_offset *= -1;\r\n  creators_offset = `${(creators_offset + \"\").padStart(2, \"0\")}:00`;\r\n  creators_offset = `+${creators_offset}`;\r\n} else {\r\n  creators_offset = `${(creators_offset + \"\").padStart(2, \"0\")}:00`;\r\n  creators_offset = `-${creators_offset}`;\r\n}\r\n\r\nconst getHourlessDate = date_string => {\r\n  let today = date_string ? new Date(date_string) : new Date();\r\n  let year = today.getFullYear() + \"\",\r\n    month = (today.getMonth() + 1 + \"\").padStart(2, \"0\"),\r\n    day = (today.getDate() + \"\").padStart(2, \"0\");\r\n\r\n  return `${year}-${month}-${day}T00:00:00.000Z`;\r\n};\r\n\r\nconst getDatelessHour = (date_string, military) => {\r\n  let time = addTimezoneInfo(date_string);\r\n  if (military) return getLocaleTime(time).slice(11, 16);\r\n  return formatAMPM(new Date(getLocaleTime(time)));\r\n};\r\n\r\nconst getYearMonthDay = date_string => {\r\n  return getHourlessDate(date_string).slice(0, 10);\r\n};\r\n\r\nconst getUTCDate = (date_string = Date.now()) => {\r\n  const date = new Date(date_string);\r\n  return new Date(\r\n    date.getUTCFullYear(),\r\n    date.getUTCMonth(),\r\n    date.getUTCDate(),\r\n    date.getUTCHours(),\r\n    date.getUTCMinutes(),\r\n    date.getUTCSeconds()\r\n  );\r\n};\r\n\r\nconst getTime = (date) => {\r\n  let dateObj = new Date(date);\r\n  let minutes = dateObj\r\n    .getUTCHours()\r\n    .toString()\r\n    .padStart(2, \"0\");\r\n  let seconds = dateObj\r\n    .getUTCMinutes()\r\n    .toString()\r\n    .padStart(2, \"0\");\r\n  return `${minutes}:${seconds}`;\r\n};\r\n\r\nconst addDays = (date, days) => {\r\n  let dateObj = new Date(date);\r\n  dateObj.setUTCHours(0, 0, 0, 0);\r\n  dateObj.setDate(dateObj.getDate() + days);\r\n  return dateObj;\r\n};\r\n\r\nconst addMinutes = (date, minutes) => {\r\n  return new Date(date.getTime() + minutes * 60000);\r\n};\r\n\r\nconst addHours = (date, hours) => {\r\n  return addMinutes(date, hours * 60);\r\n};\r\n\r\nconst startOfWeek = date => {\r\n  let d = new Date(date);\r\n  let day = d.getDay(),\r\n    diff = d.getDate() - day;\r\n  return new Date(d.setDate(diff));\r\n};\r\n\r\nconst endOfWeek = date => {\r\n  let dateObj = new Date(date);\r\n  dateObj.setUTCHours(0, 0, 0, 0);\r\n  let toAdd = 6 - dateObj.getDay();\r\n  return addDays(dateObj, toAdd);\r\n};\r\n\r\nconst isMobile = () => {\r\n  let check = false;\r\n  (function(a) {\r\n    if (\r\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\r\n        a\r\n      ) ||\r\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\r\n        a.substr(0, 4)\r\n      )\r\n    )\r\n      check = true;\r\n  })(navigator.userAgent || navigator.vendor || window.opera);\r\n  return check;\r\n};\r\n\r\nconst generateUUID = () => {\r\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\r\n    (\r\n      c ^\r\n      (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\r\n    ).toString(16)\r\n  );\r\n};\r\n\r\nconst cloneObject = object => {\r\n  return JSON.parse(JSON.stringify(object));\r\n};\r\n\r\nconst getDayDateID = date => {\r\n  let year = `${date.getUTCFullYear()}`;\r\n  let month = `${date.getUTCMonth()}`.padStart(2, \"0\");\r\n  let day = `${date.getUTCDate()}`.padStart(2, \"0\");\r\n  return `${year}-${month}-${day}`;\r\n};\r\n\r\nconst getLocaleTime = dateString => {\r\n  let [date, hour] = new Date(dateString).toLocaleString(\"en-GB\").split(\", \");\r\n  date = date\r\n    .split(\"/\")\r\n    .reverse()\r\n    .join(\"-\");\r\n  return `${date}T${hour}.000Z`;\r\n};\r\n\r\nconst addTimezoneInfo = ISOdate => {\r\n  if (new Date(ISOdate).toISOString() !== ISOdate) return;\r\n  return `${ISOdate.slice(0, 19)}${creators_offset}`;\r\n};\r\n\r\nconst isToday = date => {\r\n  if (!date) return;\r\n  let today = getLocaleTime(new Date()).slice(0, 10);\r\n  return date.slice(0, 10) === today;\r\n};\r\n\r\nconst isBefore = (date1, date2) => {\r\n  if (!date1 || !date2) return;\r\n  return new Date(date1) < new Date(date2);\r\n};\r\n\r\nconst isWeekend = date => {\r\n  if (!date) return;\r\n  let day = new Date(date).getDay();\r\n  return day === 6 || day === 0;\r\n};\r\n\r\nconst formatAMPM = date => {\r\n  let hours = date.getUTCHours();\r\n  let result = `${hours % 12 === 0 ? 12 : hours % 12} ${\r\n    hours >= 12 ? \"PM\" : \"AM\"\r\n  }`;\r\n  return result;\r\n};\r\n\r\nexport {\r\n  addDays,\r\n  addMinutes,\r\n  addHours,\r\n  startOfWeek,\r\n  endOfWeek,\r\n  isMobile,\r\n  generateUUID,\r\n  cloneObject,\r\n  addTimezoneInfo,\r\n  getHourlessDate,\r\n  getDatelessHour,\r\n  getYearMonthDay,\r\n  getLocaleTime,\r\n  isToday,\r\n  isBefore,\r\n  isWeekend,\r\n  formatAMPM,\r\n  getTime,\r\n};\r\n","export default {\r\n  getAllHours: () => [\r\n    // \"00:00:00\",\r\n    // \"00:10:00\",\r\n    // \"00:20:00\",\r\n    // \"00:30:00\",\r\n    // \"00:40:00\",\r\n    // \"00:50:00\",\r\n    // \"01:00:00\",\r\n    // \"01:10:00\",\r\n    // \"01:20:00\",\r\n    // \"01:30:00\",\r\n    // \"01:40:00\",\r\n    // \"01:50:00\",\r\n    // \"02:00:00\",\r\n    // \"02:10:00\",\r\n    // \"02:20:00\",\r\n    // \"02:30:00\",\r\n    // \"02:40:00\",\r\n    // \"02:50:00\",\r\n    // \"03:00:00\",\r\n    // \"03:10:00\",\r\n    // \"03:20:00\",\r\n    // \"03:30:00\",\r\n    // \"03:40:00\",\r\n    // \"03:50:00\",\r\n    // \"04:00:00\",\r\n    // \"04:10:00\",\r\n    // \"04:20:00\",\r\n    // \"04:30:00\",\r\n    // \"04:40:00\",\r\n    // \"04:50:00\",\r\n    // \"05:00:00\",\r\n    // \"05:10:00\",\r\n    // \"05:20:00\",\r\n    // \"05:30:00\",\r\n    // \"05:40:00\",\r\n    // \"05:50:00\",\r\n    // \"06:00:00\",\r\n    // \"06:10:00\",\r\n    // \"06:20:00\",\r\n    // \"06:30:00\",\r\n    // \"06:40:00\",\r\n    // \"06:50:00\",\r\n    // \"07:00:00\",\r\n    // \"07:10:00\",\r\n    // \"07:20:00\",\r\n    // \"07:30:00\",\r\n    // \"07:40:00\",\r\n    // \"07:50:00\",\r\n    \"08:00:00\",\r\n    \"08:10:00\",\r\n    \"08:20:00\",\r\n    \"08:30:00\",\r\n    \"08:40:00\",\r\n    \"08:50:00\",\r\n    \"09:00:00\",\r\n    \"09:10:00\",\r\n    \"09:20:00\",\r\n    \"09:30:00\",\r\n    \"09:40:00\",\r\n    \"09:50:00\",\r\n    \"10:00:00\",\r\n    \"10:10:00\",\r\n    \"10:20:00\",\r\n    \"10:30:00\",\r\n    \"10:40:00\",\r\n    \"10:50:00\",\r\n    \"11:00:00\",\r\n    \"11:10:00\",\r\n    \"11:20:00\",\r\n    \"11:30:00\",\r\n    \"11:40:00\",\r\n    \"11:50:00\",\r\n    \"12:00:00\",\r\n    \"12:10:00\",\r\n    \"12:20:00\",\r\n    \"12:30:00\",\r\n    \"12:40:00\",\r\n    \"12:50:00\",\r\n    \"13:00:00\",\r\n    \"13:10:00\",\r\n    \"13:20:00\",\r\n    \"13:30:00\",\r\n    \"13:40:00\",\r\n    \"13:50:00\",\r\n    \"14:00:00\",\r\n    \"14:10:00\",\r\n    \"14:20:00\",\r\n    \"14:30:00\",\r\n    \"14:40:00\",\r\n    \"14:50:00\",\r\n    \"15:00:00\",\r\n    \"15:10:00\",\r\n    \"15:20:00\",\r\n    \"15:30:00\",\r\n    \"15:40:00\",\r\n    \"15:50:00\",\r\n    \"16:00:00\",\r\n    \"16:10:00\",\r\n    \"16:20:00\",\r\n    \"16:30:00\",\r\n    \"16:40:00\",\r\n    \"16:50:00\",\r\n    \"17:00:00\",\r\n    \"17:10:00\",\r\n    \"17:20:00\",\r\n    \"17:30:00\",\r\n    \"17:40:00\",\r\n    \"17:50:00\",\r\n    \"18:00:00\",\r\n    \"18:10:00\",\r\n    \"18:20:00\",\r\n    \"18:30:00\",\r\n    \"18:40:00\",\r\n    \"18:50:00\",\r\n    \"19:00:00\"\r\n    // \"19:10:00\",\r\n    // \"19:20:00\",\r\n    // \"19:30:00\",\r\n    // \"19:40:00\",\r\n    // \"19:50:00\",\r\n    // \"20:00:00\",\r\n    // \"20:10:00\",\r\n    // \"20:20:00\",\r\n    // \"20:30:00\",\r\n    // \"20:40:00\",\r\n    // \"20:50:00\",\r\n    // \"21:00:00\",\r\n    // \"21:10:00\",\r\n    // \"21:20:00\",\r\n    // \"21:30:00\",\r\n    // \"21:40:00\",\r\n    // \"21:50:00\",\r\n    // \"22:00:00\",\r\n    // \"22:10:00\",\r\n    // \"22:20:00\",\r\n    // \"22:30:00\",\r\n    // \"22:40:00\",\r\n    // \"22:50:00\",\r\n    // \"23:00:00\",\r\n    // \"23:10:00\",\r\n    // \"23:20:00\",\r\n    // \"23:30:00\",\r\n    // \"23:40:00\",\r\n    // \"23:50:00\",\r\n    // \"24:00:00\"\r\n  ],\r\n  getFullHours: () => [\r\n    // \"00:00:00\",\r\n    // \"01:00:00\",\r\n    // \"02:00:00\",\r\n    // \"03:00:00\",\r\n    // \"04:00:00\",\r\n    // \"05:00:00\",\r\n    // \"06:00:00\",\r\n    // \"07:00:00\",\r\n   \"08:00:00\",\r\n    \"09:00:00\",\r\n    \"10:00:00\",\r\n    \"11:00:00\",\r\n    \"12:00:00\",\r\n    \"13:00:00\",\r\n    \"14:00:00\",\r\n    \"15:00:00\",\r\n    \"16:00:00\",\r\n    \"17:00:00\",\r\n    \"18:00:00\",\r\n    \"19:00:00\"\r\n    // \"20:00:00\",\r\n    // \"21:00:00\",\r\n    // \"22:00:00\",\r\n    // \"23:00:00\"\r\n  ]\r\n}","import registerPromiseWorker from \"./registerPromiseWorker.js\";\r\nimport {\r\n  generateUUID,\r\n  addDays,\r\n  addMinutes,\r\n  addHours,\r\n  getYearMonthDay,\r\n  getLocaleTime\r\n} from \"../utils.js\";\r\nimport hourUtils from \"../hours.js\";\r\n\r\nregisterPromiseWorker(message => {\r\n  const { type, data } = message;\r\n  if (type === \"message\") {\r\n    return `Worker replies: ${new Date().toISOString()}`;\r\n  }\r\n\r\n  switch (type) {\r\n    case \"getDays\":\r\n      return getDays(data.day, data.options);\r\n    case \"getHours\":\r\n      return getHours(data.hourOptions);\r\n    case \"getDayCells\":\r\n      return getDayCells(data.day, data.hourOptions);\r\n    case \"constructDayEvents\":\r\n      return constructDayEvents(data.day, data.events);\r\n    case \"constructNewEvent\":\r\n      return constructNewEvent(data.event);\r\n  }\r\n});\r\n\r\nfunction getDays(dayString, { hide_dates, hide_days, view_type }) {\r\n  let date = new Date(`${dayString}T00:00:00.000Z`);\r\n  let day_of_week = date.getUTCDay() - 1;\r\n  let days = [];\r\n  if (view_type === \"day\") {\r\n    days = [\r\n      {\r\n        value: date.toISOString(),\r\n        index: 0\r\n      }\r\n    ];\r\n  } else {\r\n    for (let idx = 0; idx < 7; idx++) {\r\n      days.push({\r\n        value: addDays(date, idx - day_of_week).toISOString(),\r\n        index: idx\r\n      });\r\n    }\r\n  }\r\n  if (hide_dates && hide_dates.length > 0) {\r\n    days = days.filter(({ value }) => {\r\n      return hide_dates.indexOf(value.slice(0, 10)) < 0;\r\n    });\r\n  }\r\n  if (hide_days && hide_days.length > 0) {\r\n    days = days.filter(({ index }) => {\r\n      return hide_days.indexOf(index) < 0;\r\n    });\r\n  }\r\n  return days;\r\n}\r\n\r\nfunction getHours(hour_options) {\r\n  let date = new Date();\r\n  date.setUTCHours(0, 0, 0, 0);\r\n  let iso_date = getYearMonthDay(date);\r\n\r\n  let day_hours = hourUtils.getFullHours();\r\n  if (hour_options) {\r\n    let { start_hour, end_hour } = hour_options;\r\n    day_hours = day_hours.slice(start_hour, end_hour);\r\n  }\r\n  let hours = [];\r\n  for (let idx = 0; idx < day_hours.length; idx++) {\r\n    let value = `${iso_date}T${day_hours[idx]}.000Z`;\r\n    hours.push({\r\n      value,\r\n      index: idx,\r\n      visible: true\r\n    });\r\n  }\r\n  return hours;\r\n}\r\n\r\nconst getDayCells = (dayString, day_options) => {\r\n  if (new Date(dayString).toISOString() !== dayString) {\r\n    throw new Error(\"Unsupported dayString parameter provided\");\r\n  }\r\n\r\n  let cells = [];\r\n  let date_part = dayString.slice(0, 10);\r\n  let all_hours = hourUtils.getAllHours();\r\n\r\n  if (day_options) {\r\n    let { start_hour, end_hour } = day_options;\r\n    let start_index = start_hour * 6;\r\n    let end_index = end_hour * 6 + 1;\r\n    all_hours = all_hours.slice(start_index, end_index);\r\n  }\r\n  for (let hourIdx = 0; hourIdx < all_hours.length; hourIdx++) {\r\n    let hour = all_hours[hourIdx];\r\n    let value = `${date_part}T${hour}.000Z`;\r\n    cells.push({\r\n      value,\r\n      index: hourIdx,\r\n      visible: true\r\n    });\r\n  }\r\n \r\n  return cells;\r\n};\r\n\r\nconst constructDayEvents = (day, existing_events) => {\r\n  let events_for_this_day = existing_events\r\n    .map(event => {\r\n      let { from, to } = event;\r\n      // from = getLocaleTime(from);\r\n      // to = getLocaleTime(to);\r\n     \r\n      return {\r\n        ...event,\r\n        from,\r\n        to\r\n      };\r\n    })\r\n    .filter(({ from }) => {\r\n      return from.slice(0, 10) === day.slice(0, 10);\r\n    });\r\n   \r\n  if (events_for_this_day.length === 0) return {};\r\n  let filtered_events = {};\r\n  events_for_this_day.forEach(event => {\r\n    const constructedEvent = constructNewEvent(event);\r\n    let { key } = constructedEvent;\r\n    if (filtered_events.hasOwnProperty(key)) {\r\n      filtered_events[key].push(constructedEvent);\r\n    } else {\r\n      filtered_events[key] = [constructedEvent];\r\n    }\r\n  });\r\n \r\n  return filtered_events;\r\n};\r\n\r\nconst constructNewEvent = event => {\r\n  let { from, to } = event;\r\n\r\n  from = new Date(from);\r\n  to = new Date(to);\r\n\r\n  from.setUTCSeconds(0, 0);\r\n  to.setUTCSeconds(0, 0);\r\n  let from_value = from.toISOString();\r\n  let masked_from = new Date(from.getTime());\r\n  let masked_to = new Date(to.getTime());\r\n  const fromData = {\r\n    value: from_value,\r\n    masked_value: masked_from.toISOString(),\r\n    rounded: false,\r\n    round_offset: null\r\n  };\r\n  const to_value = to.toISOString();\r\n  const toData = {\r\n    value: to_value,\r\n    masked_value: masked_to.toISOString(),\r\n    rounded: false,\r\n    round_offset: null\r\n  };\r\n\r\n  let multipleOf10 = dateStr => new Date(dateStr).getMinutes() % 10;\r\n\r\n  if (multipleOf10(fromData.value) !== 0) {\r\n    fromData.rounded = true;\r\n    fromData.round_offset = multipleOf10(fromData.value);\r\n    let minutes = new Date(fromData.value).getMinutes();\r\n    let maskedMinutes = Math.floor(minutes / 10) * 10;\r\n    masked_from.setMinutes(maskedMinutes);\r\n    fromData.masked_value = masked_from.toISOString();\r\n  }\r\n\r\n  let eventKey = masked_from.toISOString();\r\n\r\n  // 1 minute equals 1 pixel in our view. That means we need to find the length\r\n  // of the event by finding out the difference in minutes\r\n  const diffInMs = to - from;\r\n  const diffInHrs = Math.floor((diffInMs % 86400000) / 3600000);\r\n  const diffMins = Math.round(((diffInMs % 86400000) % 3600000) / 60000);\r\n\r\n  let constructedEvent = {\r\n    start: fromData,\r\n    end: toData,\r\n    data: event.data,\r\n    id: event.id || generateUUID(),\r\n    distance: diffMins + diffInHrs * 60,\r\n    status: \"completed\",\r\n    key: eventKey\r\n  };\r\n\r\n  // console.log(\"Constructed event:\", constructedEvent);\r\n\r\n  return constructedEvent;\r\n};\r\n\r\n/**\r\n * @param {int} The month number, 0 based\r\n * @param {int} The year, not zero based, required to account for leap years\r\n * @return {Date[]} List with date objects for each day of the month\r\n */\r\nconst getDaysInMonth = (month, year) => {\r\n  var date = new Date(year, month, 1);\r\n  var days = [];\r\n  while (date.getMonth() === month) {\r\n    days.push(new Date(date));\r\n    date.setDate(date.getDate() + 1);\r\n  }\r\n  return days;\r\n};\r\n"],"sourceRoot":""}